Bootstrap: docker
From: rocker/verse:3.6

# Latest error
# libfontconfig1-dev set to manually installed.
# libxt-dev is already the newest version (1:1.1.5-1).
# libxt-dev set to manually installed.
# libcairo2-dev is already the newest version (1.14.8-1+deb9u1).
# libxml2-dev is already the newest version (2.9.4+dfsg1-2.2+deb9u7).
# libssl-dev is already the newest version (1.1.0l-1~deb9u6).
# Some packages could not be installed. This may mean that you have
# requested an impossible situation or if you are using the unstable
# distribution that some required packages have not yet been created
# or been moved out of Incoming.
# The following information may help to resolve the situation:

# The following packages have unmet dependencies:
#  libgit2-dev : Depends: libcurl4-gnutls-dev but it is not going to be installed
# E: Unable to correct problems, you have held broken packages.
# FATAL:   While performing build: while running engine: exit status 100
# 
# should probably just install libcurl4-gnutls-dev
%post
    apt-get update && export DEBIAN_FRONTEND=noninteractive \
    && apt-get upgrade -y \
    && apt-get install -y apt-utils \
        gdebi-core \
        openssh-client \
        gnupg2 \
        dirmngr \
        iproute2 \
        procps \
        lsof \
        htop \
        net-tools \
        psmisc \
        curl \
        wget \
        rsync \
        ca-certificates \
        unzip \
        zip \
        nano \
        vim-tiny \
        less \
        jq \
        lsb-release \
        apt-transport-https \
        dialog \
        libc6 \
        libgcc1 \
        libkrb5-3 \
        libgssapi-krb5-2 \
        libicu[0-9][0-9] \
        liblttng-ust0 \
        libstdc++6 \
        zlib1g \
        locales \
        sudo \
        ncdu \
        man-db \
        strace \
        manpages \
        manpages-dev \
        init-system-helpers \
    && apt-get -y install \
      python3-pip \
      libssl-dev \
      libxml2-dev \
      libxt-dev \
      libfontconfig1-dev \
      libcairo2-dev \
    && install2.r --error --skipinstalled --ncpus -1 \
          languageserver \
          jsonlite \
          devtools \
          usethis \
    && install2.r --error --skipinstalled --ncpus -1 \
    --repos https://packagemanager.rstudio.com/cran/latest \
    renv \
    && rm -rf /tmp/downloaded_packages
    
    
